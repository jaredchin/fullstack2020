{"version":3,"sources":["services/Persons.js","components/Add.js","components/Filter.js","components/Person.js","App.js","index.js"],"names":["baseUrl","console","log","axios","get","newObect","post","id","newObject","put","delete","Add","props","useState","newName","setNewName","newPhone","setNewPhone","onSubmit","event","preventDefault","namePhoneObject","name","number","persons","filter","person","length","update_id","window","confirm","personServices","then","response","data","returnedPerson","setPersons","map","setNoticeMessage","setTimeout","catch","error","setErrorMessage","concat","value","onChange","target","type","Filter","filtName","setFiltName","Person","toDelete","onClick","App","noticeMessage","errorMessage","useEffect","Notification","message","className","Errorinfo","personToShow","toLowerCase","indexOf","i","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e29f35e9.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getall_persons =  () => {\r\n  console.log(baseUrl)\r\n  return axios.get(baseUrl)\r\n}\r\n\r\nconst add_person = newObect => {\r\n  return axios.post(baseUrl, newObect)\r\n}\r\n\r\nconst update_person = (id, newObject) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject)\r\n}\r\n\r\nconst delete_person = id => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default {getall_persons, add_person, update_person, delete_person}","import React, { useState } from 'react'\r\nimport personServices from '../services/Persons'\r\n\r\nconst Add = (props) => {\r\n\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newPhone, setNewPhone ] = useState('')\r\n\r\n\r\n  const handlePhoneChange = (event) => {\r\n    //console.log(event.target.value)\r\n    setNewPhone(event.target.value)\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    //console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const addNamePhone = (event) => {\r\n    event.preventDefault()\r\n    const namePhoneObject = {\r\n      name: newName,\r\n      number: newPhone\r\n    }\r\n    //console.log(nameObject.name)\r\n    //console.log(persons.indexOf(nameObject))\r\n\r\n    if (props.persons.filter(person => person.name === namePhoneObject.name).length > 0){\r\n      const update_id = props.persons.filter(person => person.name === namePhoneObject.name)[0].id\r\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\r\n        personServices\r\n        .update_person(update_id, namePhoneObject)\r\n          .then(response => response.data)\r\n          .then(returnedPerson => {\r\n            props.setPersons(props.persons.map(person => person.name === newName ? returnedPerson : person))\r\n            props.setNoticeMessage(`Updated ${newName}`)\r\n            setTimeout(() => {\r\n              props.setNoticeMessage('')\r\n            }, 5000)\r\n          })\r\n          .catch(error => {\r\n            props.setErrorMessage(error.response.data.error)\r\n            setTimeout(() => {\r\n              props.setErrorMessage('')\r\n            }, 5000)\r\n          })\r\n      }\r\n      setNewName('')\r\n      setNewPhone('')\r\n    } else {\r\n      //props.setPersons(props.persons.concat(namePhoneObject))\r\n      personServices\r\n        .add_person(namePhoneObject)\r\n        .then(response => response.data)\r\n        .then(returnedPerson => {\r\n          props.setPersons(props.persons.concat(returnedPerson))\r\n          props.setNoticeMessage(`Added ${newName}`)\r\n          setNewName('')\r\n          setNewPhone('')\r\n          setTimeout(() => {\r\n            props.setNoticeMessage('')\r\n          }, 5000)\r\n        })\r\n        .catch(error => {\r\n          props.setErrorMessage(error.response.data.error)\r\n          setTimeout(() => {\r\n            props.setErrorMessage('')\r\n          }, 5000)\r\n        })\r\n\r\n    }\r\n    //console.log('add button clicked', event.target)\r\n  }\r\n\r\n  return (\r\n    <>\r\n      \r\n      <form onSubmit={addNamePhone}>\r\n        <div>\r\n          name: <input value={newName} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newPhone} onChange={handlePhoneChange}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default Add","import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n  \r\n\r\n  const handlefiltNameChange = (event) => {\r\n    //console.log(event.target.value)\r\n    props.setFiltName(event.target.value)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <p>filter shown with <input value={props.filtName} onChange={handlefiltNameChange}/></p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst Person = ({person, toDelete}) => {\r\n  return (\r\n    <li>\r\n      {person.name} {person.number}\r\n      <button onClick={toDelete}>delete</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Person","import React, { useState,useEffect } from 'react'\r\nimport Add from './components/Add'\r\nimport Filter from './components/Filter'\r\nimport Person from './components/Person'\r\nimport personServices from './services/Persons'\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ filtName, setFiltName] = useState('')\r\n  const [ noticeMessage, setNoticeMessage ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState('')\r\n\r\n  useEffect(() => {\r\n    personServices\r\n    .getall_persons()\r\n    .then(response => {\r\n      setPersons(response.data)\r\n    })\r\n  }, [])\r\n\r\n  const toDelete = (id, name) => {\r\n    console.log('delete this phone')\r\n    if(window.confirm(`Delete ${name} ?`)){\r\n      personServices\r\n      .delete_person(id)\r\n      .then(response => response.data)\r\n      .then(setPersons(persons.filter(person => person.id !== id)))\r\n    }\r\n\r\n  }\r\n\r\n  const Notification = ({message}) => {\r\n    if (message === ''){\r\n      return null\r\n    }\r\n    return(\r\n      <div className=\"notice\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const Errorinfo = ({message}) => {\r\n    if (message === ''){\r\n      return null\r\n    }\r\n    return(\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\n\r\n  const personToShow = persons.filter(person => person.name.toLowerCase().indexOf(filtName.toLowerCase()) !== -1)\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={noticeMessage} />\r\n      <Errorinfo message={errorMessage}/>\r\n      <Filter filtName={filtName} setFiltName={setFiltName}/>\r\n      \r\n      <h2>add a new</h2>\r\n      <Add persons={persons} setPersons={setPersons} setNoticeMessage={setNoticeMessage} setErrorMessage={setErrorMessage}/>\r\n      <h2>Numbers</h2>\r\n      <ul>\r\n        {personToShow.map((person,i) =>\r\n          <Person key={i} person={person} toDelete={() => toDelete(person.id, person.name)} />\r\n        )}\r\n      </ul>\r\n\r\n      {/* <Persons personToShow={personToShow}/> */}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './index.css'\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}