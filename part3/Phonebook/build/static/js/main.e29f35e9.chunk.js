(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),s=n(14),o=n.n(s),a=n(3),i=n(4),u=n.n(i),j="/api/persons",l=function(){return console.log(j),u.a.get(j)},d=function(e){return u.a.post(j,e)},b=function(e,t){return u.a.put("".concat(j,"/").concat(e),t)},f=function(e){return u.a.delete("".concat(j,"/").concat(e))},h=function(e){var t=Object(r.useState)(""),n=Object(a.a)(t,2),s=n[0],o=n[1],i=Object(r.useState)(""),u=Object(a.a)(i,2),j=u[0],l=u[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={name:s,number:j};if(e.persons.filter((function(e){return e.name===n.name})).length>0){var c=e.persons.filter((function(e){return e.name===n.name}))[0].id;window.confirm("".concat(s," is already added to phonebook, replace the old number with a new one?"))&&b(c,n).then((function(e){return e.data})).then((function(t){e.setPersons(e.persons.map((function(e){return e.name===s?t:e}))),e.setNoticeMessage("Updated ".concat(s)),setTimeout((function(){e.setNoticeMessage("")}),5e3)})).catch((function(t){e.setErrorMessage(t.response.data.error),setTimeout((function(){e.setErrorMessage("")}),5e3)})),o(""),l("")}else d(n).then((function(e){return e.data})).then((function(t){e.setPersons(e.persons.concat(t)),e.setNoticeMessage("Added ".concat(s)),o(""),l(""),setTimeout((function(){e.setNoticeMessage("")}),5e3)})).catch((function(t){e.setErrorMessage(t.response.data.error),setTimeout((function(){e.setErrorMessage("")}),5e3)}))},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:s,onChange:function(e){o(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:j,onChange:function(e){l(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},O=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:["filter shown with ",Object(c.jsx)("input",{value:e.filtName,onChange:function(t){e.setFiltName(t.target.value)}})]})})},m=function(e){var t=e.person,n=e.toDelete;return Object(c.jsxs)("li",{children:[t.name," ",t.number,Object(c.jsx)("button",{onClick:n,children:"delete"})]})},p=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],s=t[1],o=Object(r.useState)(""),i=Object(a.a)(o,2),u=i[0],j=i[1],d=Object(r.useState)(""),b=Object(a.a)(d,2),p=b[0],x=b[1],g=Object(r.useState)(""),v=Object(a.a)(g,2),w=v[0],N=v[1];Object(r.useEffect)((function(){l().then((function(e){s(e.data)}))}),[]);var M=function(e){var t=e.message;return""===t?null:Object(c.jsx)("div",{className:"notice",children:t})},E=function(e){var t=e.message;return""===t?null:Object(c.jsx)("div",{className:"error",children:t})},S=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(u.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(M,{message:p}),Object(c.jsx)(E,{message:w}),Object(c.jsx)(O,{filtName:u,setFiltName:j}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(h,{persons:n,setPersons:s,setNoticeMessage:x,setErrorMessage:N}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:S.map((function(e,t){return Object(c.jsx)(m,{person:e,toDelete:function(){return t=e.id,c=e.name,console.log("delete this phone"),void(window.confirm("Delete ".concat(c," ?"))&&f(t).then((function(e){return e.data})).then(s(n.filter((function(e){return e.id!==t})))));var t,c}},t)}))})]})};n(38);o.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e29f35e9.chunk.js.map